<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ground Control Station</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="gcs.css">
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Menu</h2>
        <ul>
            <li><a href="#" class="sidebar-item" onclick="showPage('dashboard'); setActiveSidebar(this)">Flight View</a></li>
            <li><a href="#" class="sidebar-item" onclick="showPage('preflight'); setActiveSidebar(this)">Preflight Check</a></li>
            <li><a href="#" class="sidebar-item" onclick="showPage('config'); setActiveSidebar(this)">Config</a></li>
            <li><a href="#" class="sidebar-item" onclick="showPage('setup'); setActiveSidebar(this)">Setup</a></li>
            <li><a href="#" class="sidebar-item" onclick="showPage('firmware'); setActiveSidebar(this)">Firmware</a></li>
            <li><a href="#" class="sidebar-item" onclick="showPage('about'); setActiveSidebar(this)">About</a></li>
            <img src="assets/HAWKEYE.png" alt="Logo" class="logo">
        </ul>
    </div>

    <div class="container">

        <!-- DASHBOARD PAGE -->
        <div id="page-dashboard" class="page">
            <h1 class="title">Ground Control Station -- HAWKEYE </h1>

            <!-- Connection Panel -->
<!-- <div class="panel connection-panel">
    <div class="panel-header">
        <h2>Connection</h2>
    </div>
    <div class="panel-content">
        <div class="connection-controls" style="display: flex; align-items: center; gap: 10px; font-size: 16px;">
            <span>CONNECTING TO CONTROLLER...</span>
            <div id="connectionLoader"></div>
            <label for="connectionStatus" id="connectionStatus"><b>Status:</b></label>
            <span id="connectionStatusLabel">Connecting...</span>
        </div>
        <input type="number" placeholder="MASUKAN IP "> 
       <button id="connected">Connected</button>
    </div>
</div> -->


<!-- Connection Panel -->
<div class="panel connection-panel">
  <div class="panel-header">
    <h2>Connection</h2>
  </div>
  <div class="panel-content">
    <div class="connection-controls" style="display: flex; align-items: center; gap: 10px; font-size: 16px;">
      <label for="ipInput">IP:</label>
      <input type="text" id="ipInput" placeholder="Masukkan IP (contoh: 192.168.0.181:8000)">
      <button id="setIpBtn">Set IP</button>
<span>CONNECTING TO CONTROLLER...</span>
            <div id="connectionLoader"></div>
            <label for="connectionStatus" id="connectionStatus"><b>Status:</b></label>
            <span id="connectionStatusLabel">Connecting...</span>
      <!-- <span id="currentIp" style="margin-left:10px; color:green; font-weight:bold;"></span> -->
    </div>
  </div>
</div>





            <!-- Layout Grid -->
            <div class="grid-layout">

                <!-- Map Panel -->
                <div class="panel map-panel">
                    <div class="panel-header">
                        <h2>Map</h2>
                        <button id="toggleAutoCenterBtn">Enable Auto-Center</button>
                    </div>
                    <div class="panel-content">
                        <div id="map"></div>
                        
                    </div>
                </div>
                

                <!-- Video Streaming Panel -->
                <div class="panel video-panel">
                    <div class="panel-header1">
                        <div class="video-controls">
                        <h2>Video Streaming</h2>
                            <button id="startCameraBtn">Start Camera</button>
                            <button id="FlashBtn">Flash</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <img id="cameraStream" src="http://192.168.193.2:5000/video_feed" width="100%">
                        <!-- <img id="videoFeed" src="http://192.169.193.2:5000/video_feed" alt="Live Feed akan muncul -->
                    </div>
                </div>

                <!-- Telemetry Data Panel -->
                <div class="panel telemetry-panel">
                    <div class="panel-header">
                        <h2>Telemetry Data</h2>
                    </div>
                    <div class="panel-content">
                        <div class="telemetry-grid">
                            <div class="telemetry-item">
                                <h3>Altitude</h3>
                                <div class="telemetry-value" id="altitudeValue">-- m</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Speed</h3>
                                <div class="telemetry-value" id="speedValue">-- m/s</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Battery</h3>
                                <div class="telemetry-value" id="batteryValue">-- %</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Heading</h3>
                                <div class="telemetry-value" id="headingValue">-- °</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>GPS</h3>
                                <div class="telemetry-value" id="gpsValue">--, --</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Status</h3>
                                <div class="status-container">
                                    <span id="armedStatus" class="armed-status armed-false">DISARMED</span>
                                    <span id="modeStatus" class="mode-status">MODE: --</span>
                                </div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Motor 1</h3>
                                <div class="telemetry-value" id="motor1status">-- %</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Motor 2</h3>
                                <div class="telemetry-value" id="motor2status">-- %</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Vehicle Type</h3>
                                <div class="telemetry-value" id="vehicleTypeValue">--</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Motor 3</h3>
                                <div class="telemetry-value" id="motor3status">-- %</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>Motor 4</h3>
                                <div class="telemetry-value" id="motor4status">-- %</div>
                            </div>
                            <div class="telemetry-item">
                                <h3>GPS Count</h3>
                                <div id="gpsCount" class="gps-count" data-count="0">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vehicle Control Panel -->
                <div class="panel control-panel">
                    <div class="panel-header">
                        <h2>Vehicle Control</h2>
                    </div>
                    <div class="panel-content">
                        <div class="control-grid">
                            <select id="flightMode">
                                <option value="STABILIZE">STABILIZE</option>
                                <option value="ALT_HOLD">ALT_HOLD</option>
                                <option value="AUTO">AUTO</option>
                                <option value="GUIDED" selected>GUIDED</option>
                                <option value="LOITER">LOITER</option>
                                <option value="RTL">RTL</option>
                                <option value="MANUAL">MANUAL</option>
                                <option value="FBWA">FBWA</option>
                                <!-- <option value="RTL">RTL</option> -->
                            </select>
                            <button id="setModeBtn">Set Mode</button>
                            <button id="armBtn" class="btn-danger">ARM</button>
                            <button id="takeoffBtn">Takeoff</button>
                            <button id="landBtn">Land</button>
                            <button id="roverBtn">Rover</button>
                            <button id="droneBtn">Drone</button>
                            <button id="safetySwitch" class="btn btn-danger on" data-enabled="true" class = "on">Safety ON</button>
                            <button id="rebootControllerBtn" class="btn btn-warning">Reboot Controller</button>

                        </div>
                    </div>
                </div>

                <!-- pesan Panel -->
                <div class="panel message-panel">
                    <div class="panel-header">
                        <h2>Messages</h2>
                        <button id="toggleAutoScrollBtn" class="btn btn-secondary">Enable Auto-Scroll</button>

                    </div>
                    <div class="panel-content">
                        <!-- Tombol untuk mengaktifkan/nonaktifkan Auto-Scroll -->
                        <div class="message-controls" style="margin-bottom: 5px;">
                            <!-- <button id="toggleAutoScrollBtn" class="btn btn-secondary">Enable Auto-Scroll</button> -->
                        </div>

                        <!-- Container pesan -->
                        <div id="messageContainer" class="message-container" style="max-height: 200px; overflow-y: auto;">
                            <!-- Pesan akan ditambahkan di sini -->
                        </div>
                    </div>
                </div>


                 <!-- orientasi Panel -->
                <div class="panel empty-panel">
                    <div class="panel-header">
                        <h2>Orientation</h2>
                    </div>
                    <div class="panel-content">
                        <!-- Gyro -->
                     <div class="gyro">
                        <div class="horizon" id="horizon"></div>
                        <div class="gyro-marks" id="gyro-marks"></div>
                    </div>


                        <!-- Compass -->
                        <div class="compass">
                            <div class="compass-rose" id="compass-rose">
                                <span class="north">N</span>
                                <span class="east">E</span>
                                <span class="south">S</span>
                                <span class="west">W</span>
                            </div>
                            <div class="heading-pointer"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- PREFLIGHT CHECK PAGE -->
        <div id="page-preflight" class="page" style="display:none;">
            <h1>Preflight Check</h1>
            <div class="preflight-grid">
                <!-- Motor Section -->
                <div class="panel motor-panel">
                    <div class="panel-header"><h2>CHECK MOTOR</h2></div>
                    <div class="panel-content">
                        <label class="checkbox-container">
                            <input type="checkbox" id="lockAll">
                            Gerakkan Semua Motor Bersamaan
                        </label>
                        <div class="slider-container">
                            <div class="slider-item">
                                <label for="motor1">Motor 1</label>
                                <input type="range" id="motor1" min="0" max="100" value="0" oninput="updateValue(this)">
                                <span class="value">0%</span>
                            </div>
                            <div class="slider-item">
                                <label for="motor2">Motor 2</label>
                                <input type="range" id="motor2" min="0" max="100" value="0" oninput="updateValue(this)">
                                <span class="value">0%</span>
                            </div>
                            <div class="slider-item">
                                <label for="motor3">Motor 3</label>
                                <input type="range" id="motor3" min="0" max="100" value="0" oninput="updateValue(this)">
                                <span class="value">0%</span>
                            </div>
                            <div class="slider-item">
                                <label for="motor4">Motor 4</label>
                                <input type="range" id="motor4" min="0" max="100" value="0" oninput="updateValue(this)">
                                <span class="value">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RC Connection Section -->
                <div class="panel rc-panel">
                    <div class="panel-header"><h2>RC Connection</h2></div>
                    <div class="panel-content">
                        <div class="status-container">
                            <div class="status-item">
                                <span class="status-indicator" id="rc-status"></span>
                                <span>RC Connection Status</span>
                                <span class="status-text" id="rc-status-text">Disconnected</span>
                            </div>
                            <div class="status-item">
                                <span>Signal Strength</span>
                                <span class="status-value" id="rc-signal">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sensor Check Section -->
                <div class="panel sensor-panel">
                    <div class="panel-header"><h2>Sensor Check</h2></div>
                    <div class="panel-content">
                        <div class="sensor-grid">
                            <div class="sensor-item">
                                <span>Gyroscope</span>
                                <div class="sensor-value" id="gyro-value">OK</div>
                                <button class="kalibrasi">Kalibrasi</button>
                            </div>
                            <div class="sensor-item">
                                <span>Accelerometer</span>
                                <div class="sensor-value" id="accel-value">OK</div>
                                <button class="kalibrasi">Kalibrasi</button>
                            </div>
                            <div class="sensor-item">
                                <span>Barometer</span>
                                <div class="sensor-value" id="baro-value">OK</div>
                                <button class="kalibrasi">Kalibrasi</button>
                            </div>
                            <div class="sensor-item">
                                <span>Magnetometer</span>
                                <div class="sensor-value" id="mag-value">OK</div>
                                <button class="kalibrasi">Kalibrasi</button>
                            </div>
                        </div>
                    </div>

                    
                </div>
            </div>
        </div>

<!-- CONFIG PAGE -->
<div id="page-config" class="page" style="display:none;">
    <h1>CONFIG</h1>

    <div class="config-parameters">
        <table>
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="paramTableBody">
                <!-- Parameter akan diisi JS -->
            </tbody>
        </table>

        <div class="config-actions">
            <button id="refreshParamsBtn">Refresh</button>
            <button id="saveParamsBtn">Save Changes</button>
            <button id="resetParamsBtn">Reset to Default</button>
        </div>

        <div id="configStatus">Status: Idle</div>
    </div>
</div>


<!-- FIRMWARE -->
<div id="page-firmware" class="page" style="display:none;">
    <h1>FIRMWARE</h1>

    <div class="firmware-container">
        <div class="firmware-upload">
            <p>Unggah firmware ArduPilot ke Pixhawk:</p>
            <label for="firmwarePort">Pilih port USB:</label>
            <select id="firmwarePort">
                <option value="">-- Pilih port --</option>
            </select>
            <br><br>
            <input type="file" id="firmwareFile" accept=".px4,.bin">
            <button id="uploadFirmwareBtn">Upload Firmware</button>
            <div id="uploadStatus">Status: Idle</div>
        </div>

        <div class="logger">
            <h2>Data Log</h2>
            <p>Unduh data log dari Pixhawk:</p>
            <button id="downloadLogBtn">Download Log</button>
            <div id="logStatus">Status: Idle</div>
        </div>
    </div>
</div>






<!-- SETUP PAGE -->
<div id="page-setup" class="page" style="display:none;">
    <h1>Setup</h1>

    <div class="data-grid">
        <div class="data-card">
            <h3>Accelerometer (m/s²)</h3>
            <p>X: <span class="data-value" id="accelX">0</span></p>
            <p>Y: <span class="data-value" id="accelY">0</span></p>
            <p>Z: <span class="data-value" id="accelZ">0</span></p>
        </div>

        <div class="data-card">
            <h3>Gyroscope (rad/s)</h3>
            <p>X: <span class="data-value" id="gyroX">0</span></p>
            <p>Y: <span class="data-value" id="gyroY">0</span></p>
            <p>Z: <span class="data-value" id="gyroZ">0</span></p>
        </div>

        <div class="data-card">
            <h3>Attitude (degrees)</h3>
            <p>Roll: <span class="data-value" id="roll">0</span>°</p>
            <p>Pitch: <span class="data-value" id="pitch">0</span>°</p>
            <p>Yaw: <span class="data-value" id="yaw">0</span>°</p>
        </div>
    </div>

    <div class="chart-container">
        <h3>Accelerometer Data</h3>
        <canvas id="accelChart" height="100"></canvas>
    </div>

    <div class="chart-container">
        <h3>Gyroscope Data</h3>
        <canvas id="gyroChart" height="100"></canvas>
    </div>

    <div class="chart-container">
        <h3>Attitude Data</h3>
        <canvas id="attitudeChart" height="100"></canvas>
    </div>
</div>

        <!-- ABOUT PAGE -->
        <div id="page-about" class="page" style="display:none;">
            <h1>About</h1>
            <p>Ground Control Station HAWKEYE v1.0 - Dibuat oleh Kamil.</p>
        </div>

    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://rawgit.com/bbecquet/Leaflet.RotatedMarker/master/leaflet.rotatedMarker.js"></script>
    <!-- <script src="gcs2.js"></script> -->
    <script src="gcs(coba).js"></script>
    
</body>
</html>
